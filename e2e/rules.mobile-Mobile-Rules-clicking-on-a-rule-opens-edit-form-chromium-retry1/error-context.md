# Test info

- Name: Mobile Rules >> clicking on a rule opens edit form
- Location: /__w/actual/actual/packages/desktop-client/e2e/rules.mobile.test.ts:61:7

# Error details

```
Error: expect(page).toHaveScreenshot(expected)

  72 pixels (ratio 0.01 of all image pixels) are different.

Expected: /__w/actual/actual/packages/desktop-client/e2e/rules.mobile.test.ts-snapshots/Mobile-Rules-clicking-on-a-rule-opens-edit-form-1-chromium-linux.png
Received: /__w/actual/actual/packages/desktop-client/test-results/rules.mobile-Mobile-Rules-clicking-on-a-rule-opens-edit-form-chromium-retry1/Mobile-Rules-clicking-on-a-rule-opens-edit-form-1-actual.png
    Diff: /__w/actual/actual/packages/desktop-client/test-results/rules.mobile-Mobile-Rules-clicking-on-a-rule-opens-edit-form-chromium-retry1/Mobile-Rules-clicking-on-a-rule-opens-edit-form-1-diff.png

Call log:
  - expect.toHaveScreenshot with timeout 5000ms
    - verifying given screenshot expectation
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - 72 pixels (ratio 0.01 of all image pixels) are different.
  - waiting 100ms before taking screenshot
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - captured a stable screenshot
  - 72 pixels (ratio 0.01 of all image pixels) are different.

    at /__w/actual/actual/packages/desktop-client/e2e/rules.mobile.test.ts:71:24
```

# Page snapshot

```yaml
- button "Back":
  - img
  - text: Back
- heading "Edit Rule"
- main:
  - text: "Stage of rule:"
  - button "Pre"
  - button "Default"
  - button "Post"
  - img
  - text: If
  - button "all":
    - text: all
    - img
  - text: "of these conditions match:"
  - button "date":
    - text: date
    - img
  - button "is":
    - text: is
    - img
  - button "Every month on the 29th"
  - button "Add entry":
    - img
  - button "amount":
    - text: amount
    - img
  - button "is":
    - text: is
    - img
  - button "Make positive":
    - img
  - textbox: 27,000.00
  - button "Delete entry":
    - img
  - button "Add entry":
    - img
  - text: "Then apply these actions: link schedule Payee: None — Amount: -27,000.00 — Next: 01/29/2017"
  - button "Add entry":
    - img
  - button "Split into multiple transactions"
  - text: "This rule applies to these transactions:"
  - button "Apply actions (0)" [disabled]
  - text: Date Payee Amount
  - button "Delete"
  - button "Cancel"
  - button "Save"
```

# Test source

```ts
   1 | import { type Page } from '@playwright/test';
   2 |
   3 | import { expect, test } from './fixtures';
   4 | import { ConfigurationPage } from './page-models/configuration-page';
   5 | import { MobileNavigation } from './page-models/mobile-navigation';
   6 | import { type MobileRulesPage } from './page-models/mobile-rules-page';
   7 |
   8 | test.describe('Mobile Rules', () => {
   9 |   let page: Page;
  10 |   let navigation: MobileNavigation;
  11 |   let rulesPage: MobileRulesPage;
  12 |   let configurationPage: ConfigurationPage;
  13 |
  14 |   test.beforeEach(async ({ browser }) => {
  15 |     page = await browser.newPage();
  16 |     navigation = new MobileNavigation(page);
  17 |     configurationPage = new ConfigurationPage(page);
  18 |
  19 |     // Set mobile viewport
  20 |     await page.setViewportSize({
  21 |       width: 350,
  22 |       height: 600,
  23 |     });
  24 |
  25 |     await page.goto('/');
  26 |     await configurationPage.createTestFile();
  27 |
  28 |     // Navigate to rules page and wait for it to load
  29 |     rulesPage = await navigation.goToRulesPage();
  30 |   });
  31 |
  32 |   test.afterEach(async () => {
  33 |     await page.close();
  34 |   });
  35 |
  36 |   test('checks the page visuals', async () => {
  37 |     await rulesPage.searchFor('Dominion');
  38 |
  39 |     // Check that the header is present
  40 |     await expect(page.getByRole('heading', { name: 'Rules' })).toBeVisible();
  41 |
  42 |     // Check that the add button is present
  43 |     await expect(rulesPage.addButton).toBeVisible();
  44 |
  45 |     // Check that the search box is present with proper placeholder
  46 |     await expect(rulesPage.searchBox).toBeVisible();
  47 |     await expect(rulesPage.searchBox).toHaveAttribute(
  48 |       'placeholder',
  49 |       'Filter rules…',
  50 |     );
  51 |
  52 |     await expect(page).toMatchThemeScreenshots();
  53 |   });
  54 |
  55 |   test('clicking add button opens rule creation form', async () => {
  56 |     await rulesPage.clickAddRule();
  57 |
  58 |     await expect(page).toMatchThemeScreenshots();
  59 |   });
  60 |
  61 |   test('clicking on a rule opens edit form', async () => {
  62 |     const ruleCount = await rulesPage.getRuleCount();
  63 |     expect(ruleCount).toBeGreaterThan(0);
  64 |
  65 |     await rulesPage.clickRule(0);
  66 |
  67 |     // Click on the header to have consistent focused element
  68 |     // (otherwise sometimes the condition field is "hovered" and thus has a different background color)
  69 |     await page.getByRole('heading', { name: 'Edit Rule' }).click();
  70 |
> 71 |     await expect(page).toMatchThemeScreenshots();
     |                        ^ Error: expect(page).toHaveScreenshot(expected)
  72 |   });
  73 |
  74 |   test('page handles empty state gracefully', async () => {
  75 |     // Search for something that won't match to get empty state
  76 |     await rulesPage.searchFor('NonExistentRule123456789');
  77 |     await page.waitForTimeout(500);
  78 |
  79 |     // Check that empty message is shown
  80 |     const emptyMessage = page.getByText(/No rules found/);
  81 |     await expect(emptyMessage).toBeVisible();
  82 |
  83 |     // Check that no rule items are visible
  84 |     const rules = rulesPage.getAllRules();
  85 |     await expect(rules).toHaveCount(0);
  86 |     await expect(page).toMatchThemeScreenshots();
  87 |   });
  88 | });
  89 |
```