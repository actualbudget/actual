[{"sql":["CREATE TABLE \"banks\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"bank_id\" text,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"banks_bank_id_index\" ON \"banks\" USING btree (\"bank_id\") WHERE \"banks\".\"tombstone\" IS FALSE;"],"bps":true,"folderMillis":1743191595098,"hash":"dde3f08039081c981d04d957c9ad403290d96b9c8be735a362e694f7e4eb70db"},{"sql":["CREATE TABLE \"accounts\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"offbudget\" boolean DEFAULT false,\n\t\"closed\" boolean DEFAULT false,\n\t\"sort_order\" bigint,\n\t\"account_id\" text,\n\t\"balance_current\" bigint,\n\t\"balance_available\" bigint,\n\t\"balance_limit\" bigint,\n\t\"mask\" text,\n\t\"official_name\" text,\n\t\"type\" text,\n\t\"subtype\" text,\n\t\"bank\" varchar(36),\n\t\"account_sync_source\" text,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nALTER TABLE \"accounts\" ADD CONSTRAINT \"accounts_bank_banks_id_fk\" FOREIGN KEY (\"bank\") REFERENCES \"public\".\"banks\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"accounts_name_index\" ON \"accounts\" USING btree (\"name\") WHERE \"accounts\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"accounts_bank_index\" ON \"accounts\" USING btree (\"bank\") WHERE \"accounts\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"accounts_sort_order_name_index\" ON \"accounts\" USING btree (\"sort_order\",\"name\");"],"bps":true,"folderMillis":1743191628915,"hash":"dbaf7799cbb4e92ba03da11f0e8417c51a5b196cfae81c85ea1b74d58b07d451"},{"sql":["CREATE TABLE \"category_groups\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"is_income\" boolean DEFAULT false,\n\t\"sort_order\" bigint,\n\t\"hidden\" boolean DEFAULT false,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"category_groups_name_index\" ON \"category_groups\" USING btree (\"name\") WHERE \"category_groups\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"category_groups_is_income_sort_order_id_index\" ON \"category_groups\" USING btree (\"is_income\",\"sort_order\",\"id\");","\nCREATE INDEX \"category_groups_sort_order_id_index\" ON \"category_groups\" USING btree (\"sort_order\",\"id\");"],"bps":true,"folderMillis":1743191639804,"hash":"c6fcd00dafa6f91cfcf817d4d48d274cdaafecdc1ef696b5da92ebaba3f7bf29"},{"sql":["CREATE TABLE \"categories\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"is_income\" boolean DEFAULT false,\n\t\"cat_group\" varchar(36),\n\t\"sort_order\" bigint,\n\t\"hidden\" boolean DEFAULT false,\n\t\"goal_def\" jsonb,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nALTER TABLE \"categories\" ADD CONSTRAINT \"categories_cat_group_category_groups_id_fk\" FOREIGN KEY (\"cat_group\") REFERENCES \"public\".\"category_groups\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"categories_name_index\" ON \"categories\" USING btree (\"name\") WHERE \"categories\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"categories_cat_group_index\" ON \"categories\" USING btree (\"cat_group\") WHERE \"categories\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"categories_sort_order_id_index\" ON \"categories\" USING btree (\"sort_order\",\"id\");","\nCREATE INDEX \"categories_goal_def_index\" ON \"categories\" USING btree (\"goal_def\" NULLS FIRST);"],"bps":true,"folderMillis":1743191652928,"hash":"459043fcb51ca227c810fc1d0991db8c238973ff4fe72e55c72d08da99435e7d"},{"sql":["CREATE TABLE \"category_mapping\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"transfer_id\" varchar(36)\n);\n","\nALTER TABLE \"category_mapping\" ADD CONSTRAINT \"category_mapping_id_categories_id_fk\" FOREIGN KEY (\"id\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"category_mapping\" ADD CONSTRAINT \"category_mapping_transfer_id_categories_id_fk\" FOREIGN KEY (\"transfer_id\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"category_mapping_transfer_id_index\" ON \"category_mapping\" USING btree (\"transfer_id\");"],"bps":true,"folderMillis":1743191663445,"hash":"831841456c28825ce5f53feea1b035cfd5fdbf6268da982f013a68d34ca18afe"},{"sql":["CREATE TABLE \"kv_cache\" (\n\t\"key\" text PRIMARY KEY NOT NULL,\n\t\"value\" text\n);\n"],"bps":true,"folderMillis":1743191671686,"hash":"d8bda5f48062398905137ed14dd5a0c96b2d42b2ea342a31536f45c4df86a6e5"},{"sql":["CREATE TABLE \"kv_cache_key\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"key\" text\n);\n","\nALTER TABLE \"kv_cache_key\" ADD CONSTRAINT \"kv_cache_key_key_kv_cache_key_fk\" FOREIGN KEY (\"key\") REFERENCES \"public\".\"kv_cache\"(\"key\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"kv_cache_key_key_index\" ON \"kv_cache_key\" USING btree (\"key\");"],"bps":true,"folderMillis":1743191680185,"hash":"28c44ca2f7b870f758fb5a00043af8efb97cbc51622a077dfcc545af67cf5e86"},{"sql":["CREATE TABLE \"messages_clock\" (\n\t\"id\" integer PRIMARY KEY NOT NULL,\n\t\"clock\" jsonb\n);\n","\nCREATE INDEX \"messages_clock_clock_index\" ON \"messages_clock\" USING gin (\"clock\");"],"bps":true,"folderMillis":1743191688387,"hash":"5c93bc77f15961cd9723fa276786994a5f1581b20787737e1f2fa9ad03208ce1"},{"sql":["CREATE TABLE \"messages_crdt\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"timestamp\" text,\n\t\"dataset\" text,\n\t\"row\" varchar(36),\n\t\"column\" text,\n\t\"value\" \"bytea\"\n);\n","\nCREATE INDEX \"messages_crdt_timestamp_index\" ON \"messages_crdt\" USING btree (\"timestamp\");","\nCREATE INDEX \"messages_crdt_dataset_row_column_timestamp_index\" ON \"messages_crdt\" USING btree (\"dataset\",\"row\",\"column\",\"timestamp\");"],"bps":true,"folderMillis":1743191696693,"hash":"c57b9e0137984f1ff39a55fbadd0ad9ba4f636262fa3ab483af17ea6e1bf2c16"},{"sql":["CREATE TABLE \"notes\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"note\" text\n);\n"],"bps":true,"folderMillis":1743191704117,"hash":"cb9225ac5b0563ce82082c689d46a3e71a6b7468b8c5de1bcf5847b747b7bb16"},{"sql":["CREATE TABLE \"payees\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"transfer_acct\" varchar(36),\n\t\"favorite\" boolean DEFAULT false,\n\t\"learn_categories\" boolean DEFAULT true,\n\t\"tombstone\" boolean DEFAULT false,\n\t\"category\" text\n);\n","\nALTER TABLE \"payees\" ADD CONSTRAINT \"payees_transfer_acct_accounts_id_fk\" FOREIGN KEY (\"transfer_acct\") REFERENCES \"public\".\"accounts\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"payees_name_index\" ON \"payees\" USING btree (\"name\") WHERE \"payees\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"payees_transfer_acct_index\" ON \"payees\" USING btree (\"transfer_acct\" NULLS FIRST) WHERE \"payees\".\"tombstone\" IS FALSE;"],"bps":true,"folderMillis":1743191724262,"hash":"8cdb95b8c417b4940fd5d46fcd18bdf9373dd530f18d856c55166179406e4a78"},{"sql":["CREATE TABLE \"payee_mapping\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"target_id\" varchar(36)\n);\n","\nALTER TABLE \"payee_mapping\" ADD CONSTRAINT \"payee_mapping_id_payees_id_fk\" FOREIGN KEY (\"id\") REFERENCES \"public\".\"payees\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"payee_mapping\" ADD CONSTRAINT \"payee_mapping_target_id_payees_id_fk\" FOREIGN KEY (\"target_id\") REFERENCES \"public\".\"payees\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"payee_mapping_target_id_index\" ON \"payee_mapping\" USING btree (\"target_id\");"],"bps":true,"folderMillis":1743191732584,"hash":"62c2be981a229450d39d26e43c1429485010841dd5c16f02daa7e2ad1aaa0630"},{"sql":["CREATE TABLE \"rules\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"stage\" text,\n\t\"conditions\" jsonb,\n\t\"actions\" jsonb,\n\t\"tombstone\" boolean DEFAULT false,\n\t\"conditions_op\" text\n);\n","\nCREATE INDEX \"rules_stage_index\" ON \"rules\" USING btree (\"stage\") WHERE \"rules\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"rules_conditions_index\" ON \"rules\" USING gin (\"conditions\");","\nCREATE INDEX \"rules_actions_index\" ON \"rules\" USING gin (\"actions\");"],"bps":true,"folderMillis":1743191771117,"hash":"c7956b5c02ec50201c8d582c56a85cdba2fdaaa130c5079db6cd819ecf1e91d0"},{"sql":["CREATE TABLE \"schedules\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"rule\" varchar(36),\n\t\"active\" boolean DEFAULT false,\n\t\"completed\" boolean DEFAULT false,\n\t\"posts_transaction\" boolean DEFAULT false,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nALTER TABLE \"schedules\" ADD CONSTRAINT \"schedules_rule_rules_id_fk\" FOREIGN KEY (\"rule\") REFERENCES \"public\".\"rules\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"schedules_name_index\" ON \"schedules\" USING btree (\"name\") WHERE \"schedules\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"schedules_rule_index\" ON \"schedules\" USING btree (\"rule\") WHERE \"schedules\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"schedules_completed_index\" ON \"schedules\" USING btree (\"completed\") WHERE \"schedules\".\"tombstone\" IS FALSE;"],"bps":true,"folderMillis":1743191826560,"hash":"afc02db03653ab970b3b15fa274b04c79b39366ffc413bec223344b4ac8d74ad"},{"sql":["CREATE TABLE \"schedules_json_paths\" (\n\t\"schedule_id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"payee\" text,\n\t\"account\" text,\n\t\"amount\" text,\n\t\"date\" text\n);\n","\nALTER TABLE \"schedules_json_paths\" ADD CONSTRAINT \"schedules_json_paths_schedule_id_schedules_id_fk\" FOREIGN KEY (\"schedule_id\") REFERENCES \"public\".\"schedules\"(\"id\") ON DELETE no action ON UPDATE no action;"],"bps":true,"folderMillis":1743191834876,"hash":"76be92a8d6106af4c4a8e1c3c8353aef46cd48e2f5c60b8ded78d1b0a9385a55"},{"sql":["CREATE TABLE \"schedules_next_date\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"schedule_id\" varchar(36),\n\t\"local_next_date\" date,\n\t\"local_next_date_ts\" bigint,\n\t\"base_next_date\" date,\n\t\"base_next_date_ts\" bigint,\n\t\"tombstone\" boolean DEFAULT false,\n\tCONSTRAINT \"schedules_next_date_scheduleId_unique\" UNIQUE(\"schedule_id\")\n);\n","\nALTER TABLE \"schedules_next_date\" ADD CONSTRAINT \"schedules_next_date_schedule_id_schedules_id_fk\" FOREIGN KEY (\"schedule_id\") REFERENCES \"public\".\"schedules\"(\"id\") ON DELETE no action ON UPDATE no action;"],"bps":true,"folderMillis":1743191845666,"hash":"34535fdcb97a471f96a0d127439dd473165f739d54373f69839ec8d7af4f7181"},{"sql":["CREATE TABLE \"transactions\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"is_parent\" boolean DEFAULT false,\n\t\"is_child\" boolean DEFAULT false,\n\t\"acct\" varchar(36),\n\t\"category\" varchar(36),\n\t\"amount\" bigint,\n\t\"description\" varchar(36),\n\t\"notes\" text,\n\t\"date\" date,\n\t\"parent_id\" varchar(36),\n\t\"financial_id\" text,\n\t\"error\" jsonb,\n\t\"imported_description\" text,\n\t\"transferred_id\" varchar(36),\n\t\"schedule\" varchar(36),\n\t\"sort_order\" bigint,\n\t\"starting_balance_flag\" boolean DEFAULT false,\n\t\"tombstone\" boolean DEFAULT false,\n\t\"cleared\" boolean DEFAULT true,\n\t\"reconciled\" boolean DEFAULT false,\n\t\"pending\" boolean,\n\t\"location\" text,\n\t\"type\" text\n);\n","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_acct_accounts_id_fk\" FOREIGN KEY (\"acct\") REFERENCES \"public\".\"accounts\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_category_categories_id_fk\" FOREIGN KEY (\"category\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_parent_id_transactions_id_fk\" FOREIGN KEY (\"parent_id\") REFERENCES \"public\".\"transactions\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_transferred_id_transactions_id_fk\" FOREIGN KEY (\"transferred_id\") REFERENCES \"public\".\"transactions\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_schedule_schedules_id_fk\" FOREIGN KEY (\"schedule\") REFERENCES \"public\".\"schedules\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"transactions_category_date_index\" ON \"transactions\" USING btree (\"category\",\"date\") WHERE \"transactions\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"transactions_acct_index\" ON \"transactions\" USING btree (\"acct\") WHERE \"transactions\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"transactions_parent_id_index\" ON \"transactions\" USING btree (\"parent_id\") WHERE \"transactions\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"transactions_date_starting_balance_flag_sort_order_id_index\" ON \"transactions\" USING btree (\"date\" DESC NULLS LAST,\"starting_balance_flag\",\"sort_order\" DESC NULLS LAST,\"id\");"],"bps":true,"folderMillis":1743191868694,"hash":"1791d4384a222269e90e6c0d21afa47c8240ceace37b1ca2a56e4cc15d82a115"},{"sql":["CREATE TABLE \"reflect_budgets\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"month\" date,\n\t\"category\" varchar(36),\n\t\"amount\" bigint,\n\t\"carryover\" boolean DEFAULT false,\n\t\"goal\" bigint,\n\t\"long_goal\" bigint\n);\n","\nALTER TABLE \"reflect_budgets\" ADD CONSTRAINT \"reflect_budgets_category_categories_id_fk\" FOREIGN KEY (\"category\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"reflect_budgets_month_category_index\" ON \"reflect_budgets\" USING btree (\"month\",\"category\");"],"bps":true,"folderMillis":1743191878914,"hash":"ea47d8f1b774d47c1dc5414738e6e5f852cfa7588c258d2a4b23afe4f0ff2d00"},{"sql":["CREATE TABLE \"zero_budgets\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"month\" date,\n\t\"category\" varchar(36),\n\t\"amount\" bigint,\n\t\"carryover\" boolean DEFAULT false,\n\t\"goal\" bigint,\n\t\"long_goal\" bigint\n);\n","\nALTER TABLE \"zero_budgets\" ADD CONSTRAINT \"zero_budgets_category_categories_id_fk\" FOREIGN KEY (\"category\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"zero_budgets_month_category_index\" ON \"zero_budgets\" USING btree (\"month\",\"category\");"],"bps":true,"folderMillis":1743191886835,"hash":"dc5d52bdf0d14f6c53928e04488b71b6f61c52fc9e301f8d98542ada192bc00a"},{"sql":["CREATE TABLE \"zero_budget_months\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"buffered\" bigint\n);\n"],"bps":true,"folderMillis":1743191895863,"hash":"00c1b8b701c4d5a1d1602a628d6125545a1808bd77cdb402c6215faf000095a5"},{"sql":["CREATE TABLE \"transaction_filters\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"conditions\" jsonb,\n\t\"conditions_op\" text,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"transaction_filters_name_index\" ON \"transaction_filters\" USING btree (\"name\") WHERE \"transaction_filters\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"transaction_filters_conditions_index\" ON \"transaction_filters\" USING gin (\"conditions\") WHERE \"transaction_filters\".\"tombstone\" IS FALSE;"],"bps":true,"folderMillis":1743191908292,"hash":"535e90a5c5e0dbcb9744942e4625b3c1d204a572ef2d0391cd76a76d759b0390"},{"sql":["CREATE TABLE \"preferences\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"value\" text\n);\n"],"bps":true,"folderMillis":1743191915422,"hash":"f3158ed1482695e41fd051bb41af45607b2d223d7a26908e5e0eabcc347b2910"},{"sql":["CREATE TABLE \"custom_reports\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"start_date\" date,\n\t\"end_date\" date,\n\t\"date_static\" bigint,\n\t\"date_range\" text,\n\t\"mode\" text,\n\t\"group_by\" text,\n\t\"balance_type\" text,\n\t\"show_empty\" boolean DEFAULT false,\n\t\"show_offbudget\" boolean DEFAULT false,\n\t\"show_hidden\" boolean DEFAULT false,\n\t\"show_uncategorized\" boolean DEFAULT false,\n\t\"selected_categories\" text,\n\t\"graph_type\" text,\n\t\"conditions\" jsonb,\n\t\"conditions_op\" text,\n\t\"metadata\" jsonb,\n\t\"interval\" text,\n\t\"color_scheme\" text,\n\t\"include_current\" boolean DEFAULT false,\n\t\"sort_by\" text,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"custom_reports_name_index\" ON \"custom_reports\" USING btree (\"name\") WHERE \"custom_reports\".\"tombstone\" IS FALSE;","\nCREATE INDEX \"custom_reports_conditions_index\" ON \"custom_reports\" USING gin (\"conditions\") WHERE \"custom_reports\".\"tombstone\" IS FALSE;"],"bps":true,"folderMillis":1743191924627,"hash":"49ae00d82970f08629078dfe20cb5dba7330f53b7fba67f6b66d678c92108f5e"},{"sql":["CREATE TABLE \"dashboard\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"type\" text,\n\t\"width\" integer,\n\t\"height\" integer,\n\t\"x\" integer,\n\t\"y\" integer,\n\t\"meta\" jsonb,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"dashboard_y_x_index\" ON \"dashboard\" USING btree (\"y\" DESC NULLS LAST,\"x\" DESC NULLS LAST) WHERE \"dashboard\".\"tombstone\" IS FALSE;"],"bps":true,"folderMillis":1743191940921,"hash":"4a71df856131fb4ab2cfcdf43b9d1c01c8b882b59a92105b53b95bbbe22a1b70"},{"sql":["CREATE VIEW \"public\".\"v_transactions_internal\" AS (\n    SELECT\n      \"transactions\".\"id\",\n      \"transactions\".\"is_parent\",\n      \"transactions\".\"is_child\",\n      CASE WHEN \"transactions\".\"is_child\" IS FALSE THEN NULL ELSE \"transactions\".\"parent_id\" END AS parent_id,\n      \"transactions\".\"acct\" AS account,\n      CASE WHEN \"transactions\".\"is_parent\" IS TRUE THEN NULL ELSE \"category_mapping\".\"transfer_id\" END AS category,\n      COALESCE(\"transactions\".\"amount\", 0) AS amount,\n      \"payee_mapping\".\"target_id\" AS payee,\n      \"transactions\".\"notes\",\n      \"transactions\".\"date\",\n      \"transactions\".\"financial_id\" AS imported_id,\n      \"transactions\".\"error\",\n      \"transactions\".\"imported_description\" AS imported_payee,\n      \"transactions\".\"starting_balance_flag\",\n      \"transactions\".\"transferred_id\" AS transfer_id,\n      \"transactions\".\"schedule\",\n      \"transactions\".\"cleared\",\n      \"transactions\".\"reconciled\",\n      \"transactions\".\"tombstone\",\n      \"transactions\".\"sort_order\"\n    FROM\n      \"transactions\"\n    LEFT JOIN\n      \"category_mapping\"\n        ON \"transactions\".\"category\" = \"category_mapping\".\"id\"\n    LEFT JOIN\n      \"payee_mapping\"\n        ON \"transactions\".\"description\" = \"payee_mapping\".\"id\"\n    WHERE\n      \"transactions\".\"date\" IS NOT NULL\n      AND \"transactions\".\"acct\" IS NOT NULL\n      AND (\"transactions\".\"is_child\" IS FALSE OR \"transactions\".\"parent_id\" IS NOT NULL)\n  );"],"bps":true,"folderMillis":1743191954616,"hash":"4ac56ad17e0f4dc07ebf116530db02f22a920a331c6970273645f5d82f886c73"},{"sql":["CREATE VIEW \"public\".\"v_transactions_internal_alive\" AS (\n    SELECT\n      \"v_transactions_internal\".*\n    FROM\n      \"v_transactions_internal\"\n    LEFT JOIN\n      \"transactions\"\n        ON (\"transactions\".\"is_child\" IS TRUE\n        AND \"transactions\".\"id\" = \"v_transactions_internal\".\"parent_id\")\n    WHERE\n      COALESCE(\"transactions\".\"tombstone\", FALSE) IS FALSE\n      AND (\"v_transactions_internal\".\"is_child\" IS FALSE OR \"transactions\".\"tombstone\" IS FALSE)\n  );"],"bps":true,"folderMillis":1743191964402,"hash":"bf53a79843ef84b2f93c49e483ecbeb6785a7292ccd282b3eeb7c6dee4c8491c"},{"sql":["CREATE VIEW \"public\".\"v_transactions\" AS (\n    SELECT\n      \"v_transactions_internal_alive\".\"id\",\n      \"v_transactions_internal_alive\".\"is_parent\",\n      \"v_transactions_internal_alive\".\"is_child\",\n      \"v_transactions_internal_alive\".\"parent_id\",\n      \"accounts\".\"id\" AS account,\n      \"categories\".\"id\" AS category,\n      \"v_transactions_internal_alive\".\"amount\",\n      \"payees\".\"id\" AS payee,\n      \"v_transactions_internal_alive\".\"notes\",\n      \"v_transactions_internal_alive\".\"date\",\n      \"v_transactions_internal_alive\".\"imported_id\",\n      \"v_transactions_internal_alive\".\"error\",\n      \"v_transactions_internal_alive\".\"imported_payee\",\n      \"v_transactions_internal_alive\".\"starting_balance_flag\",\n      \"v_transactions_internal_alive\".\"transfer_id\",\n      \"v_transactions_internal_alive\".\"sort_order\",\n      \"v_transactions_internal_alive\".\"cleared\",\n      \"v_transactions_internal_alive\".\"reconciled\",\n      \"v_transactions_internal_alive\".\"tombstone\",\n      \"v_transactions_internal_alive\".\"schedule\"\n    FROM\n      \"v_transactions_internal_alive\"\n    LEFT JOIN\n      \"payees\"\n        ON (\"payees\".\"id\" = \"v_transactions_internal_alive\".\"payee\"\n        AND \"payees\".\"tombstone\" IS FALSE)\n    LEFT JOIN\n      \"categories\"\n        ON (\"categories\".\"id\" = \"v_transactions_internal_alive\".\"category\"\n        AND \"categories\".\"tombstone\" IS FALSE)\n    LEFT JOIN\n      \"accounts\"\n        ON (\"accounts\".\"id\" = \"v_transactions_internal_alive\".\"account\"\n        AND \"accounts\".\"tombstone\" IS FALSE)\n    ORDER BY\n      \"v_transactions_internal_alive\".\"date\" DESC,\n      \"v_transactions_internal_alive\".\"starting_balance_flag\",\n      \"v_transactions_internal_alive\".\"sort_order\" DESC,\n      \"v_transactions_internal_alive\".\"id\"\n  );"],"bps":true,"folderMillis":1743191975534,"hash":"6319085b435100a1049fe19898b0e7a87444c66fe216183d3f38de1d1487eb1e"},{"sql":["CREATE VIEW \"public\".\"v_categories\" AS (select \"id\", \"name\", \"is_income\", \"hidden\", \"cat_group\" as \"group\", \"sort_order\", \"tombstone\" from \"categories\");"],"bps":true,"folderMillis":1743191986005,"hash":"73032e1e5895bd226475c7bf016c8730b6a4e44d5f052989bfaa41c1e4c46086"},{"sql":["CREATE VIEW \"public\".\"v_payees\" AS (select \"payees\".\"id\", COALESCE(\"accounts\".\"name\", \"payees\".\"name\") as \"name\", \"payees\".\"transfer_acct\", \"payees\".\"favorite\", \"payees\".\"learn_categories\", \"payees\".\"tombstone\" from \"payees\" left join \"accounts\" on (\"payees\".\"transfer_acct\" = \"accounts\".\"id\" and \"accounts\".\"tombstone\" IS FALSE) where (\"payees\".\"transfer_acct\" is null or \"accounts\".\"id\" is not null));"],"bps":true,"folderMillis":1743191994497,"hash":"4300af760f8b4f09906d4884772ae5a76a00852f3f4afcd81d79203e648c37d7"},{"sql":["CREATE VIEW \"public\".\"v_schedules\" AS (\n    WITH parsed_rule_conditions AS (\n      SELECT\n        \"rules\".\"id\" AS rule_id,\n        jsonb_extract_path_text(condition, 'value') AS value,\n        condition ->> 'field' AS field,\n        condition ->> 'op' AS op\n      FROM\n        \"rules\"\n      CROSS JOIN\n        jsonb_array_elements(\"rules\".\"conditions\"::jsonb) AS condition\n    )\n    SELECT\n        \"schedules\".\"id\",\n        \"schedules\".\"name\",\n        \"schedules\".\"rule\",\n        CASE\n            WHEN \"schedules_next_date\".\"local_next_date_ts\" = \"schedules_next_date\".\"base_next_date_ts\" THEN \"schedules_next_date\".\"local_next_date\"\n            ELSE \"schedules_next_date\".\"base_next_date\"\n        END AS next_date,\n        \"schedules\".\"completed\",\n        \"schedules\".\"posts_transaction\",\n        \"schedules\".\"tombstone\",\n        \"payee_mapping\".\"target_id\" AS _payee,\n        account_condition.value AS _account,\n        amount_condition.value AS _amount,\n        amount_condition.op AS _amount_op,\n        date_condition.value AS _date,\n        \"rules\".\"conditions\" AS _conditions,\n        \"rules\".\"actions\" AS _actions\n    FROM\n        \"schedules\"\n    LEFT JOIN\n        \"schedules_next_date\" ON \"schedules_next_date\".\"schedule_id\" = \"schedules\".\"id\"\n    LEFT JOIN\n        \"rules\" ON \"rules\".\"id\" = \"schedules\".\"rule\"\n    LEFT JOIN\n        parsed_rule_conditions payee_condition\n          ON payee_condition.rule_id = \"rules\".\"id\"\n            AND payee_condition.field = 'payee'\n    LEFT JOIN\n        \"payee_mapping\" ON \"payee_mapping\".\"id\" = payee_condition.value\n    LEFT JOIN\n        parsed_rule_conditions account_condition\n          ON account_condition.rule_id = \"rules\".\"id\"\n            AND account_condition.field = 'account'\n    LEFT JOIN\n        parsed_rule_conditions amount_condition\n          ON amount_condition.rule_id = \"rules\".\"id\"\n            AND amount_condition.field = 'amount'\n    LEFT JOIN\n        parsed_rule_conditions date_condition\n          ON date_condition.rule_id = \"rules\".\"id\"\n            AND date_condition.field = 'date'\n  );"],"bps":true,"folderMillis":1743198235603,"hash":"98c22454759131695f8ca72f70c2480890480c0e4d97cd9f38cc690a0ff0f012"}]