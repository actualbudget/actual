[{"sql":["CREATE TABLE \"banks\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"bank_id\" text,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"banks_bank_id_index\" ON \"banks\" USING btree (\"bank_id\");","\nCREATE INDEX \"banks_tombstone_index\" ON \"banks\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141313755,"hash":"130b219680c9171e486cd633f14f936bb748c44421fc43f6698fee5afb50e6f1"},{"sql":["CREATE TABLE \"accounts\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"offbudget\" boolean DEFAULT false,\n\t\"closed\" boolean DEFAULT false,\n\t\"sort_order\" bigint,\n\t\"account_id\" text,\n\t\"balance_current\" bigint,\n\t\"balance_available\" bigint,\n\t\"balance_limit\" bigint,\n\t\"mask\" text,\n\t\"official_name\" text,\n\t\"type\" text,\n\t\"subtype\" text,\n\t\"bank\" varchar(36),\n\t\"account_sync_source\" text,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nALTER TABLE \"accounts\" ADD CONSTRAINT \"accounts_bank_banks_id_fk\" FOREIGN KEY (\"bank\") REFERENCES \"public\".\"banks\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"accounts_bank_index\" ON \"accounts\" USING btree (\"bank\");","\nCREATE INDEX \"accounts_account_id_index\" ON \"accounts\" USING btree (\"account_id\");","\nCREATE INDEX \"accounts_closed_index\" ON \"accounts\" USING btree (\"closed\");","\nCREATE INDEX \"accounts_offbudget_index\" ON \"accounts\" USING btree (\"offbudget\");","\nCREATE INDEX \"accounts_sort_order_index\" ON \"accounts\" USING btree (\"sort_order\");","\nCREATE INDEX \"accounts_tombstone_index\" ON \"accounts\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141337889,"hash":"8d2a6fc666a31b63f3208b639f9b15fbf3452a4fbdf9fbe1cee0ef8844294c11"},{"sql":["CREATE TABLE \"category_groups\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"is_income\" boolean DEFAULT false,\n\t\"sort_order\" bigint,\n\t\"hidden\" boolean DEFAULT false,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"category_groups_is_income_index\" ON \"category_groups\" USING btree (\"is_income\");","\nCREATE INDEX \"category_groups_hidden_index\" ON \"category_groups\" USING btree (\"hidden\");","\nCREATE INDEX \"category_groups_sort_order_index\" ON \"category_groups\" USING btree (\"sort_order\");","\nCREATE INDEX \"category_groups_tombstone_index\" ON \"category_groups\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141355190,"hash":"322593c8b6289577e2c9f769cf83e78bf3dad359d9829a4d78614d81a745948e"},{"sql":["CREATE TABLE \"categories\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"is_income\" boolean DEFAULT false,\n\t\"cat_group\" varchar(36),\n\t\"sort_order\" bigint,\n\t\"hidden\" boolean DEFAULT false,\n\t\"goal_def\" jsonb,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nALTER TABLE \"categories\" ADD CONSTRAINT \"categories_cat_group_category_groups_id_fk\" FOREIGN KEY (\"cat_group\") REFERENCES \"public\".\"category_groups\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"categories_cat_group_index\" ON \"categories\" USING btree (\"cat_group\");","\nCREATE INDEX \"categories_is_income_index\" ON \"categories\" USING btree (\"is_income\");","\nCREATE INDEX \"categories_hidden_index\" ON \"categories\" USING btree (\"hidden\");","\nCREATE INDEX \"categories_sort_order_index\" ON \"categories\" USING btree (\"sort_order\");","\nCREATE INDEX \"categories_tombstone_index\" ON \"categories\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141383383,"hash":"8e6c1e6c42d230ed1fac1d5bbadc88f57e8d63cd25f97e700098dd174f9ee12a"},{"sql":["CREATE TABLE \"category_mapping\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"transferId\" varchar(36)\n);\n","\nALTER TABLE \"category_mapping\" ADD CONSTRAINT \"category_mapping_id_categories_id_fk\" FOREIGN KEY (\"id\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"category_mapping\" ADD CONSTRAINT \"category_mapping_transferId_categories_id_fk\" FOREIGN KEY (\"transferId\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"category_mapping_transferId_index\" ON \"category_mapping\" USING btree (\"transferId\");"],"bps":true,"folderMillis":1743141394624,"hash":"d07791b3217611bf1eac85772443c4128c805a367ade6c9e1ac32ece77734fb1"},{"sql":["CREATE TABLE \"kv_cache\" (\n\t\"key\" text PRIMARY KEY NOT NULL,\n\t\"value\" text\n);\n"],"bps":true,"folderMillis":1743141407197,"hash":"d8bda5f48062398905137ed14dd5a0c96b2d42b2ea342a31536f45c4df86a6e5"},{"sql":["CREATE TABLE \"kv_cache_key\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"key\" text\n);\n","\nALTER TABLE \"kv_cache_key\" ADD CONSTRAINT \"kv_cache_key_key_kv_cache_key_fk\" FOREIGN KEY (\"key\") REFERENCES \"public\".\"kv_cache\"(\"key\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"kv_cache_key_key_index\" ON \"kv_cache_key\" USING btree (\"key\");"],"bps":true,"folderMillis":1743141416732,"hash":"28c44ca2f7b870f758fb5a00043af8efb97cbc51622a077dfcc545af67cf5e86"},{"sql":["CREATE TABLE \"messages_clock\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"clock\" jsonb\n);\n"],"bps":true,"folderMillis":1743141427811,"hash":"a4daab205f540635626250f00f882e50fd17ce6221499dd62815f6b794809620"},{"sql":["CREATE TABLE \"messages_crdt\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"timestamp\" text,\n\t\"dataset\" text,\n\t\"row\" varchar(36),\n\t\"column\" text,\n\t\"value\" \"bytea\"\n);\n","\nCREATE INDEX \"messages_crdt_dataset_index\" ON \"messages_crdt\" USING btree (\"dataset\");","\nCREATE INDEX \"messages_crdt_row_index\" ON \"messages_crdt\" USING btree (\"row\");","\nCREATE INDEX \"messages_crdt_column_index\" ON \"messages_crdt\" USING btree (\"column\");","\nCREATE INDEX \"messages_crdt_timestamp_index\" ON \"messages_crdt\" USING btree (\"timestamp\");"],"bps":true,"folderMillis":1743141441777,"hash":"848b701efe56c05904969292d911a22599103f8792c7b7c4107db0c2ffa69c48"},{"sql":["CREATE TABLE \"notes\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"note\" text\n);\n"],"bps":true,"folderMillis":1743141463304,"hash":"cb9225ac5b0563ce82082c689d46a3e71a6b7468b8c5de1bcf5847b747b7bb16"},{"sql":["CREATE TABLE \"payees\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"transfer_acct\" varchar(36),\n\t\"favorite\" boolean DEFAULT false,\n\t\"learn_categories\" boolean DEFAULT true,\n\t\"tombstone\" boolean DEFAULT false,\n\t\"category\" text\n);\n","\nALTER TABLE \"payees\" ADD CONSTRAINT \"payees_transfer_acct_accounts_id_fk\" FOREIGN KEY (\"transfer_acct\") REFERENCES \"public\".\"accounts\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"payees_transfer_acct_index\" ON \"payees\" USING btree (\"transfer_acct\");","\nCREATE INDEX \"payees_favorite_index\" ON \"payees\" USING btree (\"favorite\");","\nCREATE INDEX \"payees_learn_categories_index\" ON \"payees\" USING btree (\"learn_categories\");","\nCREATE INDEX \"payees_tombstone_index\" ON \"payees\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141472805,"hash":"6e35faa7c0d34849b0feec00dd24762c7ce0df3c0e0baa6cf8359473d3899944"},{"sql":["CREATE TABLE \"payee_mapping\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"targetId\" varchar(36)\n);\n","\nALTER TABLE \"payee_mapping\" ADD CONSTRAINT \"payee_mapping_id_payees_id_fk\" FOREIGN KEY (\"id\") REFERENCES \"public\".\"payees\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"payee_mapping\" ADD CONSTRAINT \"payee_mapping_targetId_payees_id_fk\" FOREIGN KEY (\"targetId\") REFERENCES \"public\".\"payees\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"payee_mapping_targetId_index\" ON \"payee_mapping\" USING btree (\"targetId\");"],"bps":true,"folderMillis":1743141480943,"hash":"db712c512893026863c6d0628a10cfc879bdcf2f09a9a0ca16949d928beec3c4"},{"sql":["CREATE TABLE \"rules\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"stage\" text,\n\t\"conditions\" jsonb,\n\t\"actions\" jsonb,\n\t\"tombstone\" boolean DEFAULT false,\n\t\"conditions_op\" text\n);\n","\nCREATE INDEX \"rules_tombstone_index\" ON \"rules\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141492274,"hash":"16b476cfda3e2bc2a1bb751902fa5fcc7d064e35dc9431a4f28e4c408391b53b"},{"sql":["CREATE TABLE \"schedules\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"rule\" varchar(36),\n\t\"active\" boolean DEFAULT false,\n\t\"completed\" boolean DEFAULT false,\n\t\"posts_transaction\" boolean DEFAULT false,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nALTER TABLE \"schedules\" ADD CONSTRAINT \"schedules_rule_rules_id_fk\" FOREIGN KEY (\"rule\") REFERENCES \"public\".\"rules\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"schedules_rule_index\" ON \"schedules\" USING btree (\"rule\");","\nCREATE INDEX \"schedules_tombstone_index\" ON \"schedules\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141689184,"hash":"026b2a5fa1d0f8c07e8774d8221e70f0bb63bb667cb75b715bc6f4b8de8564ec"},{"sql":["CREATE TABLE \"schedules_json_paths\" (\n\t\"schedule_id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"payee\" text,\n\t\"account\" text,\n\t\"amount\" text,\n\t\"date\" text\n);\n","\nALTER TABLE \"schedules_json_paths\" ADD CONSTRAINT \"schedules_json_paths_schedule_id_schedules_id_fk\" FOREIGN KEY (\"schedule_id\") REFERENCES \"public\".\"schedules\"(\"id\") ON DELETE no action ON UPDATE no action;"],"bps":true,"folderMillis":1743141699951,"hash":"76be92a8d6106af4c4a8e1c3c8353aef46cd48e2f5c60b8ded78d1b0a9385a55"},{"sql":["CREATE TABLE \"schedules_next_date\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"schedule_id\" varchar(36),\n\t\"local_next_date\" date,\n\t\"local_next_date_ts\" bigint,\n\t\"base_next_date\" date,\n\t\"base_next_date_ts\" bigint,\n\t\"tombstone\" boolean DEFAULT false,\n\tCONSTRAINT \"schedules_next_date_schedule_id_unique\" UNIQUE(\"schedule_id\")\n);\n","\nALTER TABLE \"schedules_next_date\" ADD CONSTRAINT \"schedules_next_date_schedule_id_schedules_id_fk\" FOREIGN KEY (\"schedule_id\") REFERENCES \"public\".\"schedules\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"schedules_next_date_tombstone_index\" ON \"schedules_next_date\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141719757,"hash":"a1855f3e67326710f0a7fd2493c62ede9dbb50c8f9e23d8f98742cb2123cbdf6"},{"sql":["CREATE TABLE \"transactions\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"isParent\" boolean DEFAULT false,\n\t\"isChild\" boolean DEFAULT false,\n\t\"acct\" varchar(36),\n\t\"category\" varchar(36),\n\t\"amount\" bigint,\n\t\"description\" varchar(36),\n\t\"notes\" text,\n\t\"date\" date,\n\t\"parent_id\" varchar(36),\n\t\"financial_id\" text,\n\t\"error\" jsonb,\n\t\"imported_description\" text,\n\t\"transferred_id\" varchar(36),\n\t\"schedule\" varchar(36),\n\t\"sort_order\" bigint,\n\t\"starting_balance_flag\" boolean DEFAULT false,\n\t\"tombstone\" boolean DEFAULT false,\n\t\"cleared\" boolean DEFAULT true,\n\t\"reconciled\" boolean DEFAULT false,\n\t\"pending\" boolean,\n\t\"location\" text,\n\t\"type\" text\n);\n","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_acct_accounts_id_fk\" FOREIGN KEY (\"acct\") REFERENCES \"public\".\"accounts\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_category_categories_id_fk\" FOREIGN KEY (\"category\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_parent_id_transactions_id_fk\" FOREIGN KEY (\"parent_id\") REFERENCES \"public\".\"transactions\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_transferred_id_transactions_id_fk\" FOREIGN KEY (\"transferred_id\") REFERENCES \"public\".\"transactions\"(\"id\") ON DELETE no action ON UPDATE no action;","\nALTER TABLE \"transactions\" ADD CONSTRAINT \"transactions_schedule_schedules_id_fk\" FOREIGN KEY (\"schedule\") REFERENCES \"public\".\"schedules\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"transactions_isParent_index\" ON \"transactions\" USING btree (\"isParent\");","\nCREATE INDEX \"transactions_isChild_index\" ON \"transactions\" USING btree (\"isChild\");","\nCREATE INDEX \"transactions_acct_index\" ON \"transactions\" USING btree (\"acct\");","\nCREATE INDEX \"transactions_category_index\" ON \"transactions\" USING btree (\"category\");","\nCREATE INDEX \"transactions_amount_index\" ON \"transactions\" USING btree (\"amount\");","\nCREATE INDEX \"transactions_description_index\" ON \"transactions\" USING btree (\"description\");","\nCREATE INDEX \"transactions_notes_index\" ON \"transactions\" USING btree (\"notes\");","\nCREATE INDEX \"transactions_date_index\" ON \"transactions\" USING btree (\"date\");","\nCREATE INDEX \"transactions_parent_id_index\" ON \"transactions\" USING btree (\"parent_id\");","\nCREATE INDEX \"transactions_financial_id_index\" ON \"transactions\" USING btree (\"financial_id\");","\nCREATE INDEX \"transactions_transferred_id_index\" ON \"transactions\" USING btree (\"transferred_id\");","\nCREATE INDEX \"transactions_schedule_index\" ON \"transactions\" USING btree (\"schedule\");","\nCREATE INDEX \"transactions_sort_order_index\" ON \"transactions\" USING btree (\"sort_order\");","\nCREATE INDEX \"transactions_starting_balance_flag_index\" ON \"transactions\" USING btree (\"starting_balance_flag\");","\nCREATE INDEX \"transactions_cleared_index\" ON \"transactions\" USING btree (\"cleared\");","\nCREATE INDEX \"transactions_reconciled_index\" ON \"transactions\" USING btree (\"reconciled\");","\nCREATE INDEX \"transactions_tombstone_index\" ON \"transactions\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141734783,"hash":"3aa5361db53dc3dac3e345f71c88ff32f08d31811b4d5af6eae34094572eef97"},{"sql":["CREATE TABLE \"reflect_budgets\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"month\" date,\n\t\"category\" varchar(36),\n\t\"amount\" bigint,\n\t\"carryover\" boolean DEFAULT false,\n\t\"goal\" bigint,\n\t\"long_goal\" bigint\n);\n","\nALTER TABLE \"reflect_budgets\" ADD CONSTRAINT \"reflect_budgets_category_categories_id_fk\" FOREIGN KEY (\"category\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"reflect_budgets_month_index\" ON \"reflect_budgets\" USING btree (\"month\");","\nCREATE INDEX \"reflect_budgets_category_index\" ON \"reflect_budgets\" USING btree (\"category\");"],"bps":true,"folderMillis":1743141746231,"hash":"eb03709e72bde4bffc7cadc3ac058b428c7b3681353b6189a5d24ea9f3f53a3c"},{"sql":["CREATE TABLE \"zero_budgets\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"month\" date,\n\t\"category\" varchar(36),\n\t\"amount\" bigint,\n\t\"carryover\" boolean DEFAULT false,\n\t\"goal\" bigint,\n\t\"long_goal\" bigint\n);\n","\nALTER TABLE \"zero_budgets\" ADD CONSTRAINT \"zero_budgets_category_categories_id_fk\" FOREIGN KEY (\"category\") REFERENCES \"public\".\"categories\"(\"id\") ON DELETE no action ON UPDATE no action;","\nCREATE INDEX \"zero_budgets_month_index\" ON \"zero_budgets\" USING btree (\"month\");","\nCREATE INDEX \"zero_budgets_category_index\" ON \"zero_budgets\" USING btree (\"category\");"],"bps":true,"folderMillis":1743141753932,"hash":"a8c262384d6d51ab4dafc4f69c528ce86c618e8b29c9b0ec6e8e7f20ae5d9b83"},{"sql":["CREATE TABLE \"zero_budget_months\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"buffered\" bigint\n);\n"],"bps":true,"folderMillis":1743141762123,"hash":"00c1b8b701c4d5a1d1602a628d6125545a1808bd77cdb402c6215faf000095a5"},{"sql":["CREATE TABLE \"transaction_filters\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"conditions\" jsonb,\n\t\"conditions_op\" text,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"transaction_filters_tombstone_index\" ON \"transaction_filters\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141843066,"hash":"6d571ca943a574d3a25271e14571cdf76ce7e99384cdd5cb2f0b8a236d3d9923"},{"sql":["CREATE TABLE \"preferences\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"value\" text\n);\n"],"bps":true,"folderMillis":1743141851553,"hash":"f3158ed1482695e41fd051bb41af45607b2d223d7a26908e5e0eabcc347b2910"},{"sql":["CREATE TABLE \"custom_reports\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"name\" text,\n\t\"start_date\" date,\n\t\"end_date\" date,\n\t\"date_static\" bigint,\n\t\"date_range\" text,\n\t\"mode\" text,\n\t\"group_by\" text,\n\t\"balance_type\" text,\n\t\"show_empty\" boolean DEFAULT false,\n\t\"show_offbudget\" boolean DEFAULT false,\n\t\"show_hidden\" boolean DEFAULT false,\n\t\"show_uncateogorized\" boolean DEFAULT false,\n\t\"selected_categories\" text,\n\t\"graph_type\" text,\n\t\"conditions\" jsonb,\n\t\"conditions_op\" text,\n\t\"metadata\" jsonb,\n\t\"interval\" text,\n\t\"color_scheme\" text,\n\t\"include_current\" boolean DEFAULT false,\n\t\"sort_by\" text,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"custom_reports_tombstone_index\" ON \"custom_reports\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141860949,"hash":"04684d57cd61ef91ed6e40b6a2338d553fd131bdb275ef00d78594240c0cce5e"},{"sql":["CREATE TABLE \"dashboard\" (\n\t\"id\" varchar(36) PRIMARY KEY NOT NULL,\n\t\"type\" text,\n\t\"width\" integer,\n\t\"height\" integer,\n\t\"x\" integer,\n\t\"y\" integer,\n\t\"meta\" jsonb,\n\t\"tombstone\" boolean DEFAULT false\n);\n","\nCREATE INDEX \"dashboard_tombstone_index\" ON \"dashboard\" USING btree (\"tombstone\");"],"bps":true,"folderMillis":1743141887304,"hash":"672df5fb728610a5f55fb8089739a0ab908891c6b415ae7d357e152d056ec3e6"},{"sql":["CREATE VIEW \"public\".\"v_transactions_internal\" AS (\n    SELECT\n      \"transactions\".\"id\",\n      \"transactions\".\"isParent\" AS is_parent,\n      \"transactions\".\"isChild\" AS is_child,\n      CASE WHEN \"transactions\".\"isChild\" IS FALSE THEN NULL ELSE \"transactions\".\"parent_id\" END AS parent_id,\n      \"transactions\".\"acct\" AS account,\n      CASE WHEN \"transactions\".\"isParent\" IS TRUE THEN NULL ELSE \"category_mapping\".\"transferId\" END AS category,\n      COALESCE(\"transactions\".\"amount\", 0) AS amount,\n      \"payee_mapping\".\"targetId\" AS payee,\n      \"transactions\".\"notes\",\n      \"transactions\".\"date\",\n      \"transactions\".\"financial_id\" AS imported_id,\n      \"transactions\".\"error\",\n      \"transactions\".\"imported_description\" AS imported_payee,\n      \"transactions\".\"starting_balance_flag\",\n      \"transactions\".\"transferred_id\" AS transfer_id,\n      \"transactions\".\"schedule\",\n      \"transactions\".\"cleared\",\n      \"transactions\".\"reconciled\",\n      \"transactions\".\"tombstone\",\n      \"transactions\".\"sort_order\"\n    FROM\n      \"transactions\"\n    LEFT JOIN\n      \"category_mapping\"\n        ON \"transactions\".\"category\" = \"category_mapping\".\"id\"\n    LEFT JOIN\n      \"payee_mapping\"\n        ON \"transactions\".\"description\" = \"payee_mapping\".\"id\"\n    WHERE\n      \"transactions\".\"date\" IS NOT NULL\n      AND \"transactions\".\"acct\" IS NOT NULL\n      AND (\"transactions\".\"isChild\" IS FALSE OR \"transactions\".\"parent_id\" IS NOT NULL)\n  );"],"bps":true,"folderMillis":1743141905672,"hash":"535a795ece60117b56f1ad2f4d2d244cd9f2913f3faec019f7616f05b3b48ecf"},{"sql":["CREATE VIEW \"public\".\"v_transactions_internal_alive\" AS (\n    SELECT\n      \"v_transactions_internal\".*\n    FROM\n      \"v_transactions_internal\"\n    LEFT JOIN\n      \"transactions\"\n        ON (\"transactions\".\"isChild\" IS TRUE\n        AND \"transactions\".\"id\" = \"v_transactions_internal\".\"parent_id\")\n    WHERE\n      COALESCE(\"transactions\".\"tombstone\", FALSE) IS FALSE\n      AND (\"v_transactions_internal\".\"is_child\" IS FALSE OR \"transactions\".\"tombstone\" IS FALSE)\n  );"],"bps":true,"folderMillis":1743141918722,"hash":"c6919c4373cbe927d664c94d5fccf4eee65deaa46bf241ee5252f17c1b42e613"},{"sql":["CREATE VIEW \"public\".\"v_transactions\" AS (\n    SELECT\n      \"v_transactions_internal_alive\".\"id\",\n      \"v_transactions_internal_alive\".\"is_parent\",\n      \"v_transactions_internal_alive\".\"is_child\",\n      \"v_transactions_internal_alive\".\"parent_id\",\n      \"accounts\".\"id\" AS account,\n      \"categories\".\"id\" AS category,\n      \"v_transactions_internal_alive\".\"amount\",\n      \"payees\".\"id\" AS payee,\n      \"v_transactions_internal_alive\".\"notes\",\n      \"v_transactions_internal_alive\".\"date\",\n      \"v_transactions_internal_alive\".\"imported_id\",\n      \"v_transactions_internal_alive\".\"error\",\n      \"v_transactions_internal_alive\".\"imported_payee\",\n      \"v_transactions_internal_alive\".\"starting_balance_flag\",\n      \"v_transactions_internal_alive\".\"transfer_id\",\n      \"v_transactions_internal_alive\".\"sort_order\",\n      \"v_transactions_internal_alive\".\"cleared\",\n      \"v_transactions_internal_alive\".\"reconciled\",\n      \"v_transactions_internal_alive\".\"tombstone\",\n      \"v_transactions_internal_alive\".\"schedule\"\n    FROM\n      \"v_transactions_internal_alive\"\n    LEFT JOIN\n      \"payees\"\n        ON (\"payees\".\"id\" = \"v_transactions_internal_alive\".\"payee\"\n        AND \"payees\".\"tombstone\" IS FALSE)\n    LEFT JOIN\n      \"categories\"\n        ON (\"categories\".\"id\" = \"v_transactions_internal_alive\".\"category\"\n        AND \"categories\".\"tombstone\" IS FALSE)\n    LEFT JOIN\n      \"accounts\"\n        ON (\"accounts\".\"id\" = \"v_transactions_internal_alive\".\"account\"\n        AND \"accounts\".\"tombstone\" IS FALSE)\n    ORDER BY\n      \"v_transactions_internal_alive\".\"date\" DESC,\n      \"v_transactions_internal_alive\".\"starting_balance_flag\",\n      \"v_transactions_internal_alive\".\"sort_order\" DESC,\n      \"v_transactions_internal_alive\".\"id\"\n  );"],"bps":true,"folderMillis":1743141936606,"hash":"6319085b435100a1049fe19898b0e7a87444c66fe216183d3f38de1d1487eb1e"},{"sql":["CREATE VIEW \"public\".\"v_categories\" AS (select \"id\", \"name\", \"is_income\", \"hidden\", \"cat_group\" as \"group\", \"sort_order\", \"tombstone\" from \"categories\");"],"bps":true,"folderMillis":1743141950802,"hash":"73032e1e5895bd226475c7bf016c8730b6a4e44d5f052989bfaa41c1e4c46086"},{"sql":["CREATE VIEW \"public\".\"v_payees\" AS (select \"payees\".\"id\", COALESCE(\"accounts\".\"name\", \"payees\".\"name\") as \"name\", \"payees\".\"transfer_acct\", \"payees\".\"favorite\", \"payees\".\"learn_categories\", \"payees\".\"tombstone\" from \"payees\" left join \"accounts\" on (\"payees\".\"transfer_acct\" = \"accounts\".\"id\" and \"accounts\".\"tombstone\" IS FALSE) where (\"payees\".\"transfer_acct\" is null or \"accounts\".\"id\" is not null));"],"bps":true,"folderMillis":1743141962329,"hash":"4300af760f8b4f09906d4884772ae5a76a00852f3f4afcd81d79203e648c37d7"},{"sql":["CREATE VIEW \"public\".\"v_schedules\" AS (\n    WITH parsed_rule_conditions AS (\n      SELECT\n        \"rules\".\"id\" AS rule_id,\n        jsonb_extract_path_text(condition, 'value') AS value,\n        condition ->> 'field' AS field,\n        condition ->> 'op' AS op\n      FROM\n        \"rules\"\n      CROSS JOIN\n        jsonb_array_elements(\"rules\".\"conditions\"::jsonb) AS condition\n    )\n    SELECT\n        \"schedules\".\"id\",\n        \"schedules\".\"name\",\n        \"schedules\".\"rule\",\n        CASE\n            WHEN \"schedules_next_date\".\"local_next_date_ts\" = \"schedules_next_date\".\"base_next_date_ts\" THEN \"schedules_next_date\".\"local_next_date\"\n            ELSE \"schedules_next_date\".\"base_next_date\"\n        END AS next_date,\n        \"schedules\".\"completed\",\n        \"schedules\".\"posts_transaction\",\n        \"schedules\".\"tombstone\",\n        \"payee_mapping\".\"targetId\" AS _payee,\n        account_condition.value AS _account,\n        amount_condition.value AS _amount,\n        amount_condition.op AS _amountOp,\n        date_condition.value AS _date,\n        \"rules\".\"conditions\" AS _conditions,\n        \"rules\".\"actions\" AS _actions\n    FROM\n        \"schedules\"\n    LEFT JOIN\n        \"schedules_next_date\" ON \"schedules_next_date\".\"schedule_id\" = \"schedules\".\"id\"\n    LEFT JOIN\n        \"rules\" ON \"rules\".\"id\" = \"schedules\".\"rule\"\n    LEFT JOIN\n        parsed_rule_conditions payee_condition\n          ON payee_condition.rule_id = \"rules\".\"id\"\n            AND payee_condition.field = 'payee'\n    LEFT JOIN\n        \"payee_mapping\" ON \"payee_mapping\".\"id\" = payee_condition.value\n    LEFT JOIN\n        parsed_rule_conditions account_condition\n          ON account_condition.rule_id = \"rules\".\"id\"\n            AND account_condition.field = 'account'\n    LEFT JOIN\n        parsed_rule_conditions amount_condition\n          ON amount_condition.rule_id = \"rules\".\"id\"\n            AND amount_condition.field = 'amount'\n    LEFT JOIN\n        parsed_rule_conditions date_condition\n          ON date_condition.rule_id = \"rules\".\"id\"\n            AND date_condition.field = 'date'\n  );"],"bps":true,"folderMillis":1743141991213,"hash":"8ffdb53eb918a3105c3ba3b5feb7fc75a435e3966b41489e2e44fb4b5a69cbad"}]